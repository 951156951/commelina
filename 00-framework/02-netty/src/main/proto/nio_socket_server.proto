syntax = "proto3";

package socket.netty;

option java_package = "io.socket.netty.proto";
option java_outer_classname = "SocketNettyProtocol";

// 基本数据类型
enum DATA_TYPE {
    INT = 0;
    STRING = 1;
    BOOL = 2;
    LONG = 3;
    DOUBLUE = 4;
    FLOAT = 5;
}

enum BusinessProtocol {
    JSON = 0;
}

// socket 请求体
message SocketASK {
    string apiName = 1; // 接口
    string version = 3; // 借口版本
    repeated Arg args = 4; // 参数列表
}

// socket 消息
message SocketMessage {
    SYSTEM_CODE_CONSTANTS code = 1; // 错误码 0 表示成功响应，1表示通知 , 参考 SYSTEM_CODE_CONSTANTS
    uint32 domain = 2; // 消息所在的作用域， 0 网络层作用域 > 0 业务作用域
    BusinessMessage msg = 3; // 业务消息
}

// 业务消息体
message BusinessMessage {
    uint32 opCode = 1; // 操作码
    string version = 2; // 版本
    BusinessProtocol bp = 3; // 业务协议
    bytes msg = 4; // 字节
}

// 参数格式
message Arg {
    string name = 1;
    DATA_TYPE dataType = 2;
    bytes value = 3;
}

// 系统错误码
enum SYSTEM_CODE_CONSTANTS {
    RESONSE_CODE = 0; // 成功响应
    NOTIFY_CODE = 1; // 通知
    PROTOCOL_FORMAT_ERROR = 2; // 协议解析错误
    RPC_API_NOT_FOUND = 3; // 要调用的 api 不存在
    RPC_API_NAME_NOT_ALLOW_EMPTY = 4; // 接口地址不能为空
    RPC_API_VERSION_NOT_ALLOW_EMPTY = 5; // 要调用的 rpc method version 不允许为空
    RPC_METHOD_NOT_FOUND = 6; // 方法不存在
    RPC_METHOD_ARG_ERROR = 7; // 参数错误
    SERVER_ERROR = 8; // 服务端内部错误
}